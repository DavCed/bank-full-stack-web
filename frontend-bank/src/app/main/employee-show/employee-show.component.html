<div fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="20">
  <div *ngIf="dataSourceCheckingAccounts.length > 0">
    <h4 fxLayoutAlign="center center">Checking Accounts</h4>

    <table
      aria-describedby="customer-approved-checking-accounts-table"
      mat-table
      [dataSource]="dataSourceCheckingAccounts"
      class="mat-elevation-z8"
    >
      <tr mat-header-row *matHeaderRowDef="dataHeaders"></tr>
      <tr mat-row *matRowDef="let row; columns: dataHeaders"></tr>

      <ng-container matColumnDef="{{ headers.NA }}">
        <th mat-header-cell *matHeaderCellDef>{{ headers.NA }}</th>
        <td mat-cell *matCellDef="let useracc">{{ useracc.name }}</td>
      </ng-container>

      <ng-container matColumnDef="{{ headers.AN }}">
        <th mat-header-cell *matHeaderCellDef>{{ headers.AN }}</th>
        <td mat-cell *matCellDef="let useracc">
          {{ useracc.checkingAccount.accountNumber }}
        </td>
      </ng-container>

      <ng-container matColumnDef="{{ headers.RN }}">
        <th mat-header-cell *matHeaderCellDef>{{ headers.RN }}</th>
        <td mat-cell *matCellDef="let useracc">
          {{ useracc.checkingAccount.routingNumber }}
        </td>
      </ng-container>

      <ng-container matColumnDef="{{ headers.BA }}">
        <th mat-header-cell *matHeaderCellDef>{{ headers.BA }}</th>
        <td mat-cell *matCellDef="let useracc">
          ${{ useracc.checkingAccount.balance }}
        </td>
      </ng-container>

      <ng-container matColumnDef="{{ headers.AC }}">
        <th mat-header-cell *matHeaderCellDef>{{ headers.AC }}</th>
        <td mat-cell *matCellDef="let useracc">
          <div
            fxLayout="row"
            fxLayoutGap="10"
            *ngIf="
              useracc.checkingAccount.accountStatus === status.P;
              else approvedTag
            "
          >
            <button
              mat-raised-button
              (click)="
                changeBankAccountStatus(
                  useracc,
                  useracc.checkingAccount,
                  status.A
                )
              "
            >
              Approve
            </button>
            <button
              mat-raised-button
              (click)="
                changeBankAccountStatus(
                  useracc,
                  useracc.checkingAccount,
                  status.D
                )
              "
            >
              Deny
            </button>
          </div>
          <ng-template #approvedTag> Approved </ng-template>
        </td>
      </ng-container>
    </table>
  </div>

  <div *ngIf="dataSourceSavingsAccounts.length > 0">
    <h4 fxLayoutAlign="center center">Savings Accounts</h4>

    <table
      aria-describedby="customer-approved-savings-accounts-table"
      mat-table
      [dataSource]="dataSourceSavingsAccounts"
      class="mat-elevation-z8"
    >
      <tr mat-header-row *matHeaderRowDef="dataHeaders"></tr>
      <tr mat-row *matRowDef="let row; columns: dataHeaders"></tr>

      <ng-container matColumnDef="{{ headers.NA }}">
        <th mat-header-cell *matHeaderCellDef>{{ headers.NA }}</th>
        <td mat-cell *matCellDef="let useracc">{{ useracc.name }}</td>
      </ng-container>

      <ng-container matColumnDef="{{ headers.AN }}">
        <th mat-header-cell *matHeaderCellDef>{{ headers.AN }}</th>
        <td mat-cell *matCellDef="let useracc">
          {{ useracc.savingsAccount.accountNumber }}
        </td>
      </ng-container>

      <ng-container matColumnDef="{{ headers.RN }}">
        <th mat-header-cell *matHeaderCellDef>{{ headers.RN }}</th>
        <td mat-cell *matCellDef="let useracc">
          {{ useracc.savingsAccount.routingNumber }}
        </td>
      </ng-container>

      <ng-container matColumnDef="{{ headers.BA }}">
        <th mat-header-cell *matHeaderCellDef>{{ headers.BA }}</th>
        <td mat-cell *matCellDef="let useracc">
          ${{ useracc.savingsAccount.balance }}
        </td>
      </ng-container>

      <ng-container matColumnDef="{{ headers.AC }}">
        <th mat-header-cell *matHeaderCellDef>{{ headers.AC }}</th>
        <td mat-cell *matCellDef="let useracc">
          <div
            fxLayout="row"
            fxLayoutGap="10"
            *ngIf="
              useracc.savingsAccount.accountStatus === status.P;
              else approvedTag
            "
          >
            <button
              mat-raised-button
              (click)="
                changeBankAccountStatus(
                  useracc,
                  useracc.savingsAccount,
                  status.A
                )
              "
            >
              Approve
            </button>
            <button
              mat-raised-button
              (click)="
                changeBankAccountStatus(
                  useracc,
                  useracc.savingsAccount,
                  status.D
                )
              "
            >
              Deny
            </button>
          </div>
          <ng-template #approvedTag>Approved</ng-template>
        </td>
      </ng-container>
    </table>
  </div>
</div>
